{"version":3,"sources":["../src/index.ts","../../core/src/index.ts"],"sourcesContent":["#!/usr/bin/env node\nimport { Command } from 'commander';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport { CompatGuardLinter } from '@compatguard/core';\n\nconst program = new Command();\nprogram.name('compatguard').version('1.0.0');\n\nprogram.command('lint <paths...>')\n  .option('-b, --baseline <year>', 'Target baseline', '2024')\n  .option('--fix', 'Attempt auto-fix', false)\n  .description('Lint files for Baseline compatibility')\n  .action(async (paths, opts) => {\n    console.log('ðŸ” CompatGuard CLI - lint', paths, opts);\n    const linter = new CompatGuardLinter(opts.baseline);\n    await linter.initialize();\n    // naive expansion: treat paths as file globs (not implemented)\n    for (const p of paths) {\n      try {\n        const content = await fs.readFile(p, 'utf-8');\n        const res = await linter.lintCode(content, 'javascript', {});\n        console.log(`Results for ${p}:`, res.diagnostics.length, 'diagnostics');\n      } catch (e: unknown) {\n        if (e instanceof Error) {\n          console.warn(\"Skipping\", p, e.message);\n        } else {\n          console.warn(\"Skipping\", p, e);\n        }\n      }\n    }\n  });\n\nprogram.command('init').description('Write example .compatguardrc.json').action(async () => {\n  const cfg = { targetBaseline: '2024', frameworks: ['react','vue','svelte'] };\n  await fs.writeFile(path.resolve('.compatguardrc.json'), JSON.stringify(cfg, null, 2));\n  console.log('Wrote .compatguardrc.json');\n});\n\nprogram.parse(process.argv);\n","export interface LintDiagnostic {\n  severity: 'warning' | 'error' | 'info';\n  message: string;\n  location: { line: number; };\n}\n\nexport interface LintStats {\n  checks: number;\n}\n\nexport class CompatGuardLinter {\n  targetBaseline: string;\n  options: Record<string, any>;\n  stats: LintStats;\n  initialized: boolean;\n\n  constructor(targetBaseline: string = '2024', options: Record<string, any> = {}) {\n    this.targetBaseline = targetBaseline;\n    this.options = options;\n    this.stats = { checks: 0 };\n    this.initialized = false;\n  }\n\n  async initialize(): Promise<void> {\n    // Placeholder initialization (e.g., load baseline data)\n    this.initialized = true;\n    return;\n  }\n\n  async lintCode(code: string, fileType: string = 'javascript', opts: Record<string, any> = {}): Promise<{ diagnostics: LintDiagnostic[]; stats: LintStats }> {\n    this.stats.checks++;\n    // Very small heuristic similar to the stub\n    const diagnostics: LintDiagnostic[] = [];\n    const lines = code.split('\\n');\n    for (let i = 0; i < lines.length; i++) {\n      const l = lines[i];\n      if (l.includes('IntersectionObserver')) {\n        diagnostics.push({ severity: 'warning', message: 'IntersectionObserver detected', location: { line: i + 1 } });\n      }\n      if (l.includes(':has(') || l.includes('color-mix(')) {\n        diagnostics.push({ severity: 'warning', message: 'Modern CSS feature detected', location: { line: i + 1 } });\n      }\n    }\n    return { diagnostics, stats: this.stats };\n  }\n\n  getStats(): LintStats { return this.stats; }\n}\n\nexport default CompatGuardLinter;\n\n"],"mappings":";;;AACA,SAAS,eAAe;AACxB,OAAO,QAAQ;AACf,OAAO,UAAU;;;ACOV,IAAM,oBAAN,MAAwB;AAAA,EAM7B,YAAY,iBAAyB,QAAQ,UAA+B,CAAC,GAAG;AAC9E,SAAK,iBAAiB;AACtB,SAAK,UAAU;AACf,SAAK,QAAQ,EAAE,QAAQ,EAAE;AACzB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,MAAM,aAA4B;AAEhC,SAAK,cAAc;AACnB;AAAA,EACF;AAAA,EAEA,MAAM,SAAS,MAAc,WAAmB,cAAc,OAA4B,CAAC,GAAiE;AAC1J,SAAK,MAAM;AAEX,UAAM,cAAgC,CAAC;AACvC,UAAM,QAAQ,KAAK,MAAM,IAAI;AAC7B,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAM,IAAI,MAAM,CAAC;AACjB,UAAI,EAAE,SAAS,sBAAsB,GAAG;AACtC,oBAAY,KAAK,EAAE,UAAU,WAAW,SAAS,iCAAiC,UAAU,EAAE,MAAM,IAAI,EAAE,EAAE,CAAC;AAAA,MAC/G;AACA,UAAI,EAAE,SAAS,OAAO,KAAK,EAAE,SAAS,YAAY,GAAG;AACnD,oBAAY,KAAK,EAAE,UAAU,WAAW,SAAS,+BAA+B,UAAU,EAAE,MAAM,IAAI,EAAE,EAAE,CAAC;AAAA,MAC7G;AAAA,IACF;AACA,WAAO,EAAE,aAAa,OAAO,KAAK,MAAM;AAAA,EAC1C;AAAA,EAEA,WAAsB;AAAE,WAAO,KAAK;AAAA,EAAO;AAC7C;;;ADzCA,IAAM,UAAU,IAAI,QAAQ;AAC5B,QAAQ,KAAK,aAAa,EAAE,QAAQ,OAAO;AAE3C,QAAQ,QAAQ,iBAAiB,EAC9B,OAAO,yBAAyB,mBAAmB,MAAM,EACzD,OAAO,SAAS,oBAAoB,KAAK,EACzC,YAAY,uCAAuC,EACnD,OAAO,OAAO,OAAO,SAAS;AAC7B,UAAQ,IAAI,oCAA6B,OAAO,IAAI;AACpD,QAAM,SAAS,IAAI,kBAAkB,KAAK,QAAQ;AAClD,QAAM,OAAO,WAAW;AAExB,aAAW,KAAK,OAAO;AACrB,QAAI;AACF,YAAM,UAAU,MAAM,GAAG,SAAS,GAAG,OAAO;AAC5C,YAAM,MAAM,MAAM,OAAO,SAAS,SAAS,cAAc,CAAC,CAAC;AAC3D,cAAQ,IAAI,eAAe,CAAC,KAAK,IAAI,YAAY,QAAQ,aAAa;AAAA,IACxE,SAAS,GAAY;AACnB,UAAI,aAAa,OAAO;AACtB,gBAAQ,KAAK,YAAY,GAAG,EAAE,OAAO;AAAA,MACvC,OAAO;AACL,gBAAQ,KAAK,YAAY,GAAG,CAAC;AAAA,MAC/B;AAAA,IACF;AAAA,EACF;AACF,CAAC;AAEH,QAAQ,QAAQ,MAAM,EAAE,YAAY,mCAAmC,EAAE,OAAO,YAAY;AAC1F,QAAM,MAAM,EAAE,gBAAgB,QAAQ,YAAY,CAAC,SAAQ,OAAM,QAAQ,EAAE;AAC3E,QAAM,GAAG,UAAU,KAAK,QAAQ,qBAAqB,GAAG,KAAK,UAAU,KAAK,MAAM,CAAC,CAAC;AACpF,UAAQ,IAAI,2BAA2B;AACzC,CAAC;AAED,QAAQ,MAAM,QAAQ,IAAI;","names":[]}